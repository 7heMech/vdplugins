(function(t,e,o,r){"use strict";const i=e.findByProps("sendBotMessage"),l=e.findByStoreName("GuildStore"),c=e.findByStoreName("GuildChannelStore"),s=e.findByStoreName("ReadStateStore"),u=o.registerCommand({name:"markallasread",displayName:"markallasread",description:"read all server notifications",displayDescription:"read all server notifications",applicationId:-1,inputType:1,type:1,execute:async function(h,d){try{const n=[];Object.values(l.getGuilds()).forEach(function(p){c.getChannels(p.id).SELECTABLE.forEach(function(a){s.hasUnread(a.channel.id)&&n.push({channel_id:a.channel.id,message_id:s.lastMessageId(a.channel.id)})})}),await e.findByProps("setRequestPatch").default.post({url:e.findByProps("Endpoints").Endpoints.BULK_ACK,body:{read_states:n.slice(0,100)}}),i.sendBotMessage(d.channel.id,"Done!")}catch(n){r.logger.error(n),i.sendBotMessage(d.channel.id,"Failed to read all server notifications")}}}),f=function(){return u()};return t.onUnload=f,t})({},vendetta.metro,vendetta.commands,vendetta);
