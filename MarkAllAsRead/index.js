(function(i,e,l,c,d){"use strict";const t=e.findByProps("sendBotMessage"),u=e.findByStoreName("GuildStore"),f=e.findByStoreName("GuildChannelStore"),o=e.findByStoreName("ReadStateStore"),p=l.registerCommand({name:"markallasread",displayName:"markallasread",description:"read all server notifications",displayDescription:"read all server notifications",options:[],applicationId:"",inputType:1,type:1,execute:async function(g,a){try{if(new Date<d.storage.timeout)return t.sendBotMessage(a.channel.id,"Please wait 10 seconds!");const n=[];return Object.values(u.getGuilds()).forEach(function(r){e.findByStoreName("UserGuildSettingsStore").isMuted(r.id)||f.getChannels(r.id).SELECTABLE.forEach(function(s){o.hasUnread(s.channel.id)&&n.push({channel_id:s.channel.id,message_id:o.lastMessageId(s.channel.id)})})}),await e.findByProps("setRequestPatch").default.post({url:e.findByProps("Endpoints").Endpoints.BULK_ACK,body:{read_states:n.slice(0,100)}}),d.storage.timeout=+new Date+1e4,t.sendBotMessage(a.channel.id,"Done!")}catch(n){c.logger.error(n),t.sendBotMessage(a.channel.id,"Failed to read all server notifications!")}}}),h=function(){return p()};return i.onUnload=h,i})({},vendetta.metro,vendetta.commands,vendetta,vendetta.plugin);
