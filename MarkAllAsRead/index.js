(function(c,t,u,B,I,A){"use strict";var s;(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(s||(s={}));var l;(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(l||(l={}));var o;(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(o||(o={}));const d=t.findByProps("sendBotMessage"),f=t.findByStoreName("GuildStore"),p=t.findByStoreName("GuildChannelStore"),T=t.findByStoreName("ReadStateStore"),{post:S}=t.findByProps("setRequestPatch").default,{Endpoints:M}=t.findByProps("Endpoints"),U=t.findByStoreName("UserGuildSettingsStore"),h=u.registerCommand({name:"markallasread",displayName:"markallasread",description:"read all server notifications",displayDescription:"read all server notifications",options:[],applicationId:"",inputType:s.BUILT_IN_TEXT,type:o.CHAT,execute:async function(e,r){try{const a=[];Object.values(f.getGuilds()).forEach(function(n){U.isMuted(n.id)||p.getChannels(n.id).SELECTABLE.forEach(function(i){T.hasUnread(i.channel.id)&&a.push({channel_id:i.channel.id,message_id:T.lastMessageId(i.channel.id)})})});const N=async function(n){return await S({url:M.BULK_ACK,body:{read_states:n}})};if(a.length<100)return await N(a),d.sendBotMessage(r.channel.id,"Done!");{d.sendBotMessage(r.channel.id,"job queued, please do not switch accounts for now.");let n=0;const i=setInterval(async function(){if(await N(a.slice(n,n+100)),n+=100,n>=a.length)return clearInterval(i),I.showToast("Read all server notifications!",A.getAssetIDByName("check"))},Math.floor(Math.random()*2e3)+3e3)}}catch(a){return B.logger.error(a),d.sendBotMessage(r.channel.id,"Failed to read all server notifications")}}}),C=function(){return h()};return c.onUnload=C,c})({},vendetta.metro,vendetta.commands,vendetta,vendetta.ui.toasts,vendetta.ui.assets);
