(function(T,c,n,o,p){"use strict";var i;(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(i||(i={}));var a;(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(a||(a={}));var s;(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(s||(s={}));const N=0,u=n.findByProps("getUploads"),{sendMessage:A}=n.findByProps("sendMessage","receiveMessage"),{CloudUpload:r}=n.findByProps("CloudUpload");async function I(e,t){const l=u.getUploads(t.channel.id,N)[0].item;if(!l.mimeType.includes("audio"))return o.showToast("Only audio files are supported",p.getAssetIDByName("Small"));o.showToast("Sending voice message...");const d=new r({file:l},t.channel.id,!1,0);d.on("complete",function(){return A(t.channel.id,{content:""})}),d.on("error",function(){return o.showToast("Failed to upload voice message",p.getAssetIDByName("Small"))}),d.upload()}const m=c.registerCommand({name:"voicemessage",displayName:"voicemessage",description:"Uploads an audio file as a voice message",displayDescription:"Uploads an audio file as a voice message",type:s.CHAT,inputType:i.BUILT_IN_TEXT,applicationId:"-1",options:[{name:"file",displayName:"file",description:"Audio file to upload",displayDescription:"Audio file to upload",type:a.ATTACHMENT,required:!0}],execute:I}),U=function(){return m()};return T.onUnload=U,T})({},vendetta.commands,vendetta.metro,vendetta.ui.toasts,vendetta.ui.assets);
