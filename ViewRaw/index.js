(function(u,d,l,p,n,e,s,f){"use strict";const B=function(o){const t=JSON.parse(JSON.stringify(o));for(const a in t.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[a]}return t},{default:h}=n.findByProps("DCDAutoModerationSystemMessageView","default"),b=n.findByName("MessageRecord"),w=n.findByName("RowManager"),{ScrollView:C}=e.ReactNative;function E(o){let{message:t}=o;const a=e.React.useMemo(function(){return JSON.stringify(B(t),null,4)},[t.id]),[r,c]=e.React.useState(!1),i={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(C,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(s.Button,{style:i,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),f.showToast("Copied content to clipboard",l.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(s.Button,{text:"Copy Raw Data",style:i,color:"brand",size:"small",onPress:function(){e.clipboard.setString(a),f.showToast("Copied data to clipboard",l.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(s.Button,{style:i,text:"Display Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){c(!r)}}),!r&&e.React.createElement(h,{rowGenerator:new w,message:new b({id:"0",channel_id:t.channel_id,author:t.author,content:t.content+"\n\n```js\n"+a+"\n```"})}),r&&t.content&&e.React.createElement(s.Codeblock,{selectable:!0,style:i},t.content),r&&e.React.createElement(s.Codeblock,{selectable:!0},a)))}const g=n.findByProps("openLazy","hideActionSheet"),R=n.findByProps("push","pushLazy","pop"),P=n.findByProps("getRenderCloseButton")?.getRenderCloseButton??n.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,N=n.findByName("Navigator")??n.findByProps("Navigator")?.Navigator,{FormRow:v,FormIcon:S}=s.Forms,_=d.before("openLazy",g,function(o){let[t,a,r]=o;const c=r?.message;a!=="MessageLongPressActionSheet"||!c||t.then(function(i){const z=d.after("default",i,function(L,D){e.React.useEffect(function(){return function(){z()}},[]);const y=p.findInReactTree(D,function(k){return k?.[0]?.type?.name==="ButtonRow"});if(!y)return;const M=function(){return e.React.createElement(N,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:P?.(function(){return R.pop()}),render:function(){return e.React.createElement(E,{message:c})}}}})};y.push(e.React.createElement(v,{label:"View Raw",leading:e.React.createElement(S,{style:{opacity:1},source:l.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){g.hideActionSheet(),R.push(M)}}))})})}),A=function(){return _()};return u.onUnload=A,u})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
