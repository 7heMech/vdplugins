(function(T,s,t,v,h,N,w,z,E,$,B){"use strict";var b={string:function(e,n){return e.split(n?/(?=[A-Z])/:"_").map(function(a){return a[0].toUpperCase()+a.slice(1)}).join(" ")}};const H="https://translate.googleapis.com/translate_a/single",M={fetch:function(e){let{from:n,to:a,text:i}=e;return`${H}?client=gtx&sl=${n}&tl=${a}&dt=t&q=${encodeURIComponent(i)}`},parse:function(e){return e.json().then(function(n){if(n=n&&n[0]&&n[0][0]&&n[0].map(function(a){return a[0]}).join(""),!n)throw new Error("Invalid Translation!");return n})}};async function F(e,n){let{fromLanguage:a,toLanguage:i}=n;const o=M.fetch({text:e,from:a,to:i});return await fetch(o).then(M.parse)}async function q(e,n,a,i){let{fromLanguage:o="detect",toLanguage:l="english"}=n;return i?e:await F(e,{fromLanguage:a[o],toLanguage:a[l]})}var U={string:q};h.storage.DislateLangFrom??="detect",h.storage.DislateLangTo??="english",h.storage.DislateLangAbbr??=!1;let r=h.storage;var X=s.findByProps("sendBotMessage"),m=["detect","amharic","arabic","aymara","assamese","akan","azerbaijani","belarusian","bulgarian","bambara","bengali","corsican","czech","bosnian","danish","catalan","valencian","german","ewe","divehi","dhivehi","maldivian","english","greek","estonian","esperanto","basque","spanish","castilian","finnish","french","persian","irish","galician","guarani","western_frisian","gujarati","gaelic","scottish_gaelic","hausa","croatian","hebrew","hindi","haitian","haitian_creole","armenian","indonesian","hungarian","igbo","icelandic","italian","georgian","javanese","japanese","korean","kazakh","kannada","afrikaans","central_khmer","welsh","kurdish","kirghiz","kyrgyz","latin","luxembourgish","letzeburgesch","ganda","lao","latvian","lingala","lithuanian","malagasy","macedonian","malayalam","maori","marathi","norwegian_bokm\xE5l","mongolian","burmese","maltese","nepali","malay","dutch","flemish","chichewa","chewa","nyanja","norwegian","oromo","oriya","panjabi","punjabi","polish","quechua","pushto","pashto","russian","sanskrit","romanian","moldavian","moldovan","slovenian","kinyarwanda","slovak","sinhala","sinhalese","samoan","shona","somali","serbian","albanian","swahili","southern_sotho","swedish","sundanese","tamil","tajik","telugu","tagalog","turkmen","tigrinya","thai","tsonga","sindhi","portuguese","twi","turkish","tatar","urdu","ukrainian","uighur","uyghur","uzbek","vietnamese","yiddish","xhosa","chinese_traditional","chinese_simplified","zulu","yoruba"],C=["auto","am","ar","ay","as","ak","az","be","bg","bm","bn","co","cs","bs","da","ca","ca","de","ee","dv","dv","dv","en","el","et","eo","eu","es","es","fi","fr","fa","ga","gl","gn","fy","gu","gd","gd","ha","hr","he","hi","ht","ht","hy","id","hu","ig","is","it","ka","jv","ja","ko","kk","kn","af","km","cy","ku","ky","ky","la","lb","lb","lg","lo","lv","ln","lt","mg","mk","ml","mi","mr","nb","mn","my","mt","ne","ms","nl","nl","ny","ny","ny","no","om","or","pa","pa","pl","qu","ps","ps","ru","sa","ro","ro","ro","sl","rw","sk","si","si","sm","sn","so","sr","sq","sw","st","sv","su","ta","tg","te","tl","tk","ti","th","ts","sd","pt","tw","tr","tt","ur","uk","ug","ug","uz","vi","yi","xh","zh-tw","zh-cn","zu","yo"];const{ScrollView:K,Text:ue}=t.ReactNative,{FormRow:O}=N.Forms;function J(){const[e,n]=t.React.useState("");return t.React.createElement(K,null,t.React.createElement(N.Search,{style:{padding:15},placeholder:"Search Language",onChangeText:function(a){n(a)}}),Object.values(m).filter(function(a){return a!=="detect"}).filter(function(a){return a.includes(e)}).map(function(a,i){return t.React.createElement(O,{label:a,trailing:function(){return t.React.createElement(O.Arrow,null)},onPress:function(){r.DislateLangTo!=a&&(r.DislateLangTo=a,z.showToast(`Saved ToLang to ${r.DislateLangTo}`,v.getAssetIDByName("check")))}})}))}var A;(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(A||(A={}));var f;(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(f||(f={}));var L;(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(L||(L={}));const Q=m.filter(function(e){return e!=="detect"}).map(function(e){return{name:b.string(e),displayName:b.string(e),value:e}});var V=E.registerCommand({id:"translate",name:"translate",displayName:"translate",description:"Send a message using Dislate in any language chosen, using the Google Translate API.",displayDescription:"Send a message using Dislate in any language chosen, using the Google Translate API.",type:L.CHAT,inputType:A.BUILT_IN_TEXT,options:[{name:"text",displayName:"text",description:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",displayDescription:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",type:f.STRING,required:!0},{name:"language",displayName:"language",description:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',displayDescription:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',type:f.STRING,choices:[...Q],required:!0}],async execute(e,n){const a=e.find(function(u){return u.name==="text"}).value,i=e.find(function(u){return u.name==="language"}).value,o=Object.assign({},...m.map(function(u,k){return{[u]:C[k]}})),l=await U.string(a,{fromLanguage:r.DislateLangFrom,toLanguage:i},o);return l?{content:l}:X.sendBotMessage(n.channel.id,`Failed to translate: ${a}`)}});const Z=[V],j=s.findByProps("openLazy","hideActionSheet"),W=s.findByName("Icon"),Y=s.findByProps("Messages"),ee=s.findByStoreName("MessageStore"),ae=s.findByStoreName("ChannelStore"),{FormRow:ne}=N.Forms,x=Object.assign({},...m.map(function(e,n){return{[e]:C[n]}}));let p=[{invalid_id:"rosie and sapphire sucks"}],P=[];var te={onLoad:function(){if(!B.plugin.manifest.authors.find(function(e){return e.id===s.findByProps("getCurrentUser").getCurrentUser()?.id}))return $.stopPlugin(B.plugin.id);P.push(w.before("openLazy",j,function(e){const[n,a,i]=e;a==="MessageLongPressActionSheet"&&n.then(function(o){const l=w.after("default",o,function(u,k){t.React.useEffect(function(){return function(){l()}},[]);let[ie,_]=k.props?.children?.props?.children?.props?.children;const c=ie?.props?.message??i?.message,G=_?.findIndex(function(d){return d.props?.message===Y.Messages.MARK_UNREAD});if(!_||!c||G===-1)return;const g=ee.getMessage(c.channel_id,c.id);if(!g?.content&&!c.content)return;const I=g.id??c.id,se=g.content??c.content,R=p.find(function(d){return Object.keys(d)[0]===I},"cache object");let D=R?"Revert":"Translate";_.splice(G,0,t.React.createElement(ne,{label:`${D} Message`,leading:t.React.createElement(W,{source:D==="Translate"?v.getAssetIDByName("ic_locale_24px"):v.getAssetIDByName("ic_highlight")}),onPress:async function(){const d=r.DislateLangFrom,S=r.DislateLangTo,y=D==="Translate",re=await U.string(g.content,{fromLanguage:d,toLanguage:S},x,!y);t.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...g,content:`${y?re:R[I]} ${y?`\`[${r.DislateLangAbbr?x[S].toUpperCase():b.string(S)}]\``:""}`,guild_id:ae.getChannel(g.channel_id).guild_id},log_edit:!1}),y?p.unshift({[I]:se}):p=p.filter(function(oe){return oe!==R},"cached data override"),j.hideActionSheet()}}))})})}))},onUnload:function(){for(const e of Z)e();for(const e of P)e()},settings:J};return T.default=te,Object.defineProperty(T,"__esModule",{value:!0}),T})({},vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.ui.toasts,vendetta.commands,vendetta.plugins,vendetta);
