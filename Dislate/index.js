(function(b,i,s,D,p,G,R,S,z,E){"use strict";var d={string:function(e,a){return e.split(a?/(?=[A-Z])/:"_").map(function(n){return n[0].toUpperCase()+n.slice(1)}).join(" ")}};const $="https://translate.googleapis.com/translate_a/single",M={fetch:function(e){let{from:a,to:n,text:t}=e;return`${$}?client=gtx&sl=${a}&tl=${n}&dt=t&q=${encodeURIComponent(t)}`},parse:function(e){return e.json().then(function(a){if(a=a&&a[0]&&a[0][0]&&a[0].map(function(n){return n[0]}).join(""),!a)throw new Error("Invalid Translation!");return a})}};async function H(e,a){let{fromLanguage:n,toLanguage:t}=a;const r=M.fetch({text:e,from:n,to:t});return await fetch(r).then(M.parse)}async function q(e,a,n,t){let{fromLanguage:r="detect",toLanguage:l="english"}=a;return t?e:await H(e,{fromLanguage:n[r],toLanguage:n[l]})}var C={string:q};p.storage.DislateLangFrom??="detect",p.storage.DislateLangTo??="english",p.storage.DislateLangAbbr??=!1;let o=p.storage;var U=i.findByProps("sendBotMessage"),f=["detect","amharic","arabic","aymara","assamese","akan","azerbaijani","belarusian","bulgarian","bambara","bengali","corsican","czech","bosnian","danish","catalan","valencian","german","ewe","divehi","dhivehi","maldivian","english","greek","estonian","esperanto","basque","spanish","castilian","finnish","french","persian","irish","galician","guarani","western_frisian","gujarati","gaelic","scottish_gaelic","hausa","croatian","hebrew","hindi","haitian","haitian_creole","armenian","indonesian","hungarian","igbo","icelandic","italian","georgian","javanese","japanese","korean","kazakh","kannada","afrikaans","central_khmer","welsh","kurdish","kirghiz","kyrgyz","latin","luxembourgish","letzeburgesch","ganda","lao","latvian","lingala","lithuanian","malagasy","macedonian","malayalam","maori","marathi","norwegian_bokm\xE5l","mongolian","burmese","maltese","nepali","malay","dutch","flemish","chichewa","chewa","nyanja","norwegian","oromo","oriya","panjabi","punjabi","polish","quechua","pushto","pashto","russian","sanskrit","romanian","moldavian","moldovan","slovenian","kinyarwanda","slovak","sinhala","sinhalese","samoan","shona","somali","serbian","albanian","swahili","southern_sotho","swedish","sundanese","tamil","tajik","telugu","tagalog","turkmen","tigrinya","thai","tsonga","sindhi","portuguese","twi","turkish","tatar","urdu","ukrainian","uighur","uyghur","uzbek","vietnamese","yiddish","xhosa","chinese_traditional","chinese_simplified","zulu","yoruba"],w=["auto","am","ar","ay","as","ak","az","be","bg","bm","bn","co","cs","bs","da","ca","ca","de","ee","dv","dv","dv","en","el","et","eo","eu","es","es","fi","fr","fa","ga","gl","gn","fy","gu","gd","gd","ha","hr","he","hi","ht","ht","hy","id","hu","ig","is","it","ka","jv","ja","ko","kk","kn","af","km","cy","ku","ky","ky","la","lb","lb","lg","lo","lv","ln","lt","mg","mk","ml","mi","mr","nb","mn","my","mt","ne","ms","nl","nl","ny","ny","ny","no","om","or","pa","pa","pl","qu","ps","ps","ru","sa","ro","ro","ro","sl","rw","sk","si","si","sm","sn","so","sr","sq","sw","st","sv","su","ta","tg","te","tl","tk","ti","th","ts","sd","pt","tw","tr","tt","ur","uk","ug","ug","uz","vi","yi","xh","zh-tw","zh-cn","zu","yo"];const{ScrollView:F,Text:ue}=s.ReactNative,X=i.findByName("StaticSearchBarContainer");function K(){const[e,a]=s.React.useState("");return s.React.createElement(F,null,s.React.createElement(X,{placeholder:"Search Language",onChangeText:function(n){a(n)}}))}var y;(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(y||(y={}));var h;(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(h||(h={}));var T;(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(T||(T={}));const J=f.filter(function(e){return e!=="detect"}).map(function(e){return{name:d.string(e),displayName:d.string(e),value:e}});var Q=S.registerCommand({id:"translate",name:"translate",displayName:"translate",description:"Send a message using Dislate in any language chosen, using the Google Translate API.",displayDescription:"Send a message using Dislate in any language chosen, using the Google Translate API.",type:T.CHAT,inputType:y.BUILT_IN_TEXT,options:[{name:"text",displayName:"text",description:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",displayDescription:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",type:h.STRING,required:!0},{name:"language",displayName:"language",description:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',displayDescription:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',type:h.STRING,choices:[...J],required:!0}],async execute(e,a){const n=e.find(function(c){return c.name==="text"}).value,t=e.find(function(c){return c.name==="language"}).value,r=Object.assign({},...f.map(function(c,A){return{[c]:w[A]}})),l=await C.string(n,{fromLanguage:o.DislateLangFrom,toLanguage:t},r);return l?{content:l}:U.sendBotMessage(a.channel.id,`Failed to translate: ${n}`)}});const V=f.filter(function(e){return e!=="detect"}).map(function(e){return{name:d.string(e),displayName:d.string(e),value:e}});var Z=S.registerCommand({id:"translate-set",name:"translate-set",displayName:"translate-set",description:"temp",displayDescription:"temp",type:T.CHAT,inputType:y.BUILT_IN_TEXT,options:[{name:"to",displayName:"to",description:"to",displayDescription:"to",type:h.STRING,choices:[...V],required:!0}],async execute(e,a){const n=e.find(function(t){return t.name==="to"}).value;return o.DislateLangTo=n,U.sendBotMessage(a.channel.id,`Saved! \`${o.DislateLangTo}\``)}});const W=[Q,Z],O=i.findByProps("openLazy","hideActionSheet"),Y=i.findByName("Icon"),ee=i.findByProps("Messages"),ae=i.findByStoreName("MessageStore"),ne=i.findByStoreName("ChannelStore"),{FormRow:te}=G.Forms,x=Object.assign({},...f.map(function(e,a){return{[e]:w[a]}}));let N=[{invalid_id:"rosie and sapphire sucks"}],j=[];var ie={onLoad:function(){if(!["581573474296791211","757982547861962752","548821619661864962"].find(function(e){return e===i.findByProps("getCurrentUser").getCurrentUser()?.id}))return z.stopPlugin(E.plugin.id);j.push(R.before("openLazy",O,function(e){const[a,n,t]=e;n==="MessageLongPressActionSheet"&&a.then(function(r){const l=R.after("default",r,function(c,A){s.React.useEffect(function(){return function(){l()}},[]);let[se,L]=A.props?.children?.props?.children?.props?.children;const u=se?.props?.message??t?.message,P=L?.findIndex(function(m){return m.props?.message===ee.Messages.MARK_UNREAD});if(!L||!u||P===-1)return;const g=ae.getMessage(u.channel_id,u.id);if(!g?.content&&!u.content)return;const _=g.id??u.id,re=g.content??u.content,I=N.find(function(m){return Object.keys(m)[0]===_},"cache object");let k=I?"Revert":"Translate";L.splice(P,0,s.React.createElement(te,{label:`${k} Message`,leading:s.React.createElement(Y,{source:k==="Translate"?D.getAssetIDByName("ic_locale_24px"):D.getAssetIDByName("ic_highlight")}),onPress:async function(){const m=o.DislateLangFrom,B=o.DislateLangTo,v=k==="Translate",oe=await C.string(g.content,{fromLanguage:m,toLanguage:B},x,!v);s.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...g,content:`${v?oe:I[_]} ${v?`\`[${o.DislateLangAbbr?x[B].toUpperCase():d.string(B)}]\``:""}`,guild_id:ne.getChannel(g.channel_id).guild_id},log_edit:!1}),v?N.unshift({[_]:re}):N=N.filter(function(le){return le!==I},"cached data override"),O.hideActionSheet()}}))})})}))},onUnload:function(){for(const e of W)e();for(const e of j)e()},settings:K};return b.default=ie,Object.defineProperty(b,"__esModule",{value:!0}),b})({},vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.commands,vendetta.plugins,vendetta);
