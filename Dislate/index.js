(function(v,i,s,A,h,P,L,x,E,$){"use strict";var d={string:function(e,a){return e.split(a?/(?=[A-Z])/:"_").map(function(n){return n[0].toUpperCase()+n.slice(1)}).join(" ")}};const M="https://translate.googleapis.com/translate_a/single",N={fetch:function(e){let{from:a,to:n,text:t}=e;return`${M}?client=gtx&sl=${a}&tl=${n}&dt=t&q=${encodeURIComponent(t)}`},parse:function(e){return e.json().then(function(a){if(a=a&&a[0]&&a[0][0]&&a[0].map(function(n){return n[0]}).join(""),!a)throw new Error("Invalid Translation!");return a})}};async function U(e,a){let{fromLanguage:n,toLanguage:t}=a;const r=N.fetch({text:e,from:n,to:t});return await fetch(r).then(N.parse)}async function q(e,a,n,t){let{fromLanguage:r="detect",toLanguage:l="english"}=a;return t?e:await U(e,{fromLanguage:n[r],toLanguage:n[l]})}var j={string:q};h.storage.DislateLangFrom??="detect",h.storage.DislateLangTo??="english",h.storage.DislateLangAbbr??=!1;let o=h.storage;var C=i.findByProps("sendBotMessage"),m=["detect","amharic","arabic","aymara","assamese","akan","azerbaijani","belarusian","bulgarian","bambara","bengali","corsican","czech","bosnian","danish","catalan","valencian","german","ewe","divehi","dhivehi","maldivian","english","greek","estonian","esperanto","basque","spanish","castilian","finnish","french","persian","irish","galician","guarani","western_frisian","gujarati","gaelic","scottish_gaelic","hausa","croatian","hebrew","hindi","haitian","haitian_creole","armenian","indonesian","hungarian","igbo","icelandic","italian","georgian","javanese","japanese","korean","kazakh","kannada","afrikaans","central_khmer","welsh","kurdish","kirghiz","kyrgyz","latin","luxembourgish","letzeburgesch","ganda","lao","latvian","lingala","lithuanian","malagasy","macedonian","malayalam","maori","marathi","norwegian_bokm\xE5l","mongolian","burmese","maltese","nepali","malay","dutch","flemish","chichewa","chewa","nyanja","norwegian","oromo","oriya","panjabi","punjabi","polish","quechua","pushto","pashto","russian","sanskrit","romanian","moldavian","moldovan","slovenian","kinyarwanda","slovak","sinhala","sinhalese","samoan","shona","somali","serbian","albanian","swahili","southern_sotho","swedish","sundanese","tamil","tajik","telugu","tagalog","turkmen","tigrinya","thai","tsonga","sindhi","portuguese","twi","turkish","tatar","urdu","ukrainian","uighur","uyghur","uzbek","vietnamese","yiddish","xhosa","chinese_traditional","chinese_simplified","zulu","yoruba"],I=["auto","am","ar","ay","as","ak","az","be","bg","bm","bn","co","cs","bs","da","ca","ca","de","ee","dv","dv","dv","en","el","et","eo","eu","es","es","fi","fr","fa","ga","gl","gn","fy","gu","gd","gd","ha","hr","he","hi","ht","ht","hy","id","hu","ig","is","it","ka","jv","ja","ko","kk","kn","af","km","cy","ku","ky","ky","la","lb","lb","lg","lo","lv","ln","lt","mg","mk","ml","mi","mr","nb","mn","my","mt","ne","ms","nl","nl","ny","ny","ny","no","om","or","pa","pa","pl","qu","ps","ps","ru","sa","ro","ro","ro","sl","rw","sk","si","si","sm","sn","so","sr","sq","sw","st","sv","su","ta","tg","te","tl","tk","ti","th","ts","sd","pt","tw","tr","tt","ur","uk","ug","ug","uz","vi","yi","xh","zh-tw","zh-cn","zu","yo"];const{ScrollView:F,Text:oe}=s.ReactNative,G=i.findByName("StaticSearchBarContainer");function O(){const[e,a]=s.React.useState("");return s.React.createElement(F,null,s.React.createElement(G,{placeholder:"Search Language",onChangeText:function(n){a(n)}}))}const H=m.filter(function(e){return e!=="detect"}).map(function(e){return{name:d.string(e),displayName:d.string(e),value:e}});var K=x.registerCommand({id:"translate",name:"translate",displayName:"translate",description:"Send a message using Dislate in any language chosen, using the Google Translate API.",displayDescription:"Send a message using Dislate in any language chosen, using the Google Translate API.",type:ApplicationCommandType.CHAT,inputType:ApplicationCommandInputType.BUILT_IN_TEXT,options:[{name:"text",displayName:"text",description:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",displayDescription:"The text/message for Dislate to translate. Please note some formatting of mentions and emojis may break due to the API.",type:ApplicationCommandOptionType.STRING,required:!0},{name:"language",displayName:"language",description:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',displayDescription:'The language that Dislate will translate the text into. This can be any language from the list, except "Detect".',type:ApplicationCommandOptionType.STRING,choices:[...H],required:!0}],async execute(e,a){const n=e.find(function(c){return c.name==="text"}).value,t=e.find(function(c){return c.name==="language"}).value,r=Object.assign({},...m.map(function(c,b){return{[c]:I[b]}})),l=await j.string(n,{fromLanguage:o.DislateLangFrom,toLanguage:t},r);return l?{content:l}:C.sendBotMessage(a.channel.id,`Failed to translate: ${n}`)}});const X=m.filter(function(e){return e!=="detect"}).map(function(e){return{name:d.string(e),displayName:d.string(e),value:e}});var J=x.registerCommand({id:"translate-set",name:"translate-set",displayName:"translate-set",description:"temp",displayDescription:"temp",type:ApplicationCommandType.CHAT,inputType:ApplicationCommandInputType.BUILT_IN_TEXT,options:[{name:"to",displayName:"to",description:"to",displayDescription:"to",type:ApplicationCommandOptionType.STRING,choices:[...X],required:!0}],async execute(e,a){const n=e.find(function(t){return t.name==="to"}).value;return o.DislateLangTo=n,C.sendBotMessage(a.channel.id,`Saved! \`${o.DislateLangTo}\``)}});const Q=[K,J],S=i.findByProps("openLazy","hideActionSheet"),V=i.findByName("Icon"),Z=i.findByProps("Messages"),W=i.findByStoreName("MessageStore"),Y=i.findByStoreName("ChannelStore"),{FormRow:ee}=P.Forms,B=Object.assign({},...m.map(function(e,a){return{[e]:I[a]}}));let f=[{invalid_id:"rosie and sapphire sucks"}],R=[];var ae={onLoad:function(){if(!["581573474296791211","757982547861962752","548821619661864962"].find(function(e){return e===i.findByProps("getCurrentUser").getCurrentUser()?.id}))return E.stopPlugin($.plugin.id);R.push(L.before("openLazy",S,function(e){const[a,n,t]=e;n==="MessageLongPressActionSheet"&&a.then(function(r){const l=L.after("default",r,function(c,b){s.React.useEffect(function(){return function(){l()}},[]);let[ne,k]=b.props?.children?.props?.children?.props?.children;const u=ne?.props?.message??t?.message,z=k?.findIndex(function(p){return p.props?.message===Z.Messages.MARK_UNREAD});if(!k||!u||z===-1)return;const g=W.getMessage(u.channel_id,u.id);if(!g?.content&&!u.content)return;const T=g.id??u.id,te=g.content??u.content,D=f.find(function(p){return Object.keys(p)[0]===T},"cache object");let _=D?"Revert":"Translate";k.splice(z,0,s.React.createElement(ee,{label:`${_} Message`,leading:s.React.createElement(V,{source:_==="Translate"?A.getAssetIDByName("ic_locale_24px"):A.getAssetIDByName("ic_highlight")}),onPress:async function(){const p=o.DislateLangFrom,w=o.DislateLangTo,y=_==="Translate",ie=await j.string(g.content,{fromLanguage:p,toLanguage:w},B,!y);s.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...g,content:`${y?ie:D[T]} ${y?`\`[${o.DislateLangAbbr?B[w].toUpperCase():d.string(w)}]\``:""}`,guild_id:Y.getChannel(g.channel_id).guild_id},log_edit:!1}),y?f.unshift({[T]:te}):f=f.filter(function(se){return se!==D},"cached data override"),S.hideActionSheet()}}))})})}))},onUnload:function(){for(const e of Q)e();for(const e of R)e()},settings:O};return v.default=ae,Object.defineProperty(v,"__esModule",{value:!0}),v})({},vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.commands,vendetta.plugins,vendetta);
